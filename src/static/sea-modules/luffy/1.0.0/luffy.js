define("#luffy/1.0.0/router",["./views/operators_view","./views/apps_view","./views/hosts_view","./views/tasks_view","backbone","mustache","underscore","jquery"],function(e,t,n){var r=e("backbone"),i=e("./views/operators_view"),s=e("./views/apps_view"),o=e("./views/hosts_view"),u=e("./views/tasks_view"),a=r.Router.extend({initialize:function(e){this.container=e.container},routes:{"":"operators",operators:"operators","apps/:operator":"apps","hosts/:operator/:app":"hosts","tasks/:operator/:app/:hosts":"tasks"},operators:function(){this.container.html((new i).el)},apps:function(e){this.container.html((new s({operator:e})).el)},hosts:function(e,t){this.container.html((new o({operator:e,app:t})).el)},tasks:function(e,t,n){this.container.html((new u({operator:e,app:t,hosts:n})).el)}});n.exports=a}),define("#luffy/1.0.0/views/operators_view",["backbone","mustache","underscore","jquery"],function(e,t,n){var r='<h3>请选择您要执行的操作</h3> {{#operators}} <h5>{{group}}</h5> <ul> {{#operators}} <li><a href="javascript:void(0)" operator="{{name}}">{{description}}</a></li> {{/operators}} </ul> {{/operators}}',i=e("backbone"),s=e("mustache"),o=e("underscore"),u=e("jquery"),a=i.View.extend({events:{"click ul li a":"next_step"},initialize:function(){o.bindAll(this,"render");var e=this;u.getJSON("luffy_config",function(t){e.model=t,e.render()})},render:function(){return u(this.el).html(s.render(r,this.model)),this},next_step:function(e){location.href="#/apps/"+u(e.target).attr("operator")}});n.exports=a}),define("#luffy/1.0.0/views/apps_view",["backbone","mustache","underscore","jquery"],function(e,t,n){var r='<h3>请选择要操作的应用</h3> <ul> {{#apps}} <li><a href="javascript:void(0)">{{.}}</a></li> {{/apps}} </ul> <button type="button" class="btn back">上一步</button>',i=e("backbone"),s=e("mustache"),o=e("underscore"),u=e("jquery"),a=i.View.extend({events:{"click ul li a":"next_step","click .back":"goback"},initialize:function(e){this.operator=e.operator,o.bindAll(this,"render"),o.bindAll(this,"next_step");var t=this;u.getJSON("luffy_config",function(e){t.model=e,t.render()})},render:function(){return u(this.el).html(s.render(r,this.model)),this},next_step:function(e){location.href="#/hosts/"+this.operator+"/"+u(e.target).text()},goback:function(){history.back()}});n.exports=a}),define("#luffy/1.0.0/views/hosts_view",["backbone","mustache","underscore","jquery"],function(e,t,n){var r='<h3>请选择主机</h3> <div class="alert hide"> <button type="button" class="close" data-dismiss="alert">×</button> <span></span> </div> {{#hosts}} <label class="checkbox"><input type="checkbox" value="{{ip}}">{{name}}:{{ip}}</label> {{/hosts}} <button type="button" class="btn back">上一步</button> <button type="button" class="btn next btn-primary">下一步</button>',i=e("backbone"),s=e("mustache"),o=e("underscore"),u=e("jquery"),a=i.View.extend({events:{"click .next":"next_step","click .back":"goback"},initialize:function(e){this.operator=e.operator,this.app=e.app,o.bindAll(this,"render"),o.bindAll(this,"next_step");var t=this;u.getJSON("luffy_config",function(e){t.model=e,t.render()})},render:function(){return u(this.el).html(s.render(r,this.model)),this},next_step:function(e){var t=[];u("input:checked").each(function(){t.push(u(this).val())});if(t.length<1){this.$(".alert span").html("请选择主机。"),this.$(".alert").show();return}location.href="#/tasks/"+this.operator+"/"+this.app+"/"+t.join(",")},goback:function(){history.back()}});n.exports=a}),define("#luffy/1.0.0/views/tasks_view",["backbone","mustache","underscore","jquery"],function(e,t,n){var r='<h3>请确认操作</h3> <ul> <li>执行操作：{{operator}}</li> <li>进行操作的应用：{{app}}</li> <li>进行操作的主机：{{#hosts}}{{.}}, {{/hosts}}</li> <li>其它参数：<input class="other_args" type="text"/></li> </ul> <button type="button" class="btn back">上一步</button> <button type="button" class="btn next btn-primary">确认执行</button> <pre class="results"></pre>',i=e("backbone"),s=e("mustache"),o=e("underscore"),u=e("jquery"),a=i.View.extend({events:{"click .next":"excute","click .back":"goback"},initialize:function(e){this.model=e,this.model.hosts=this.model.hosts.split(","),o.bindAll(this,"render"),o.bindAll(this,"excute"),this.render()},render:function(){return u(this.el).html(s.render(r,this.model)),this},excute:function(e){var t=this;t.$(".results").empty(),o.each(this.model.hosts,function(e){var n="run/"+e+"/"+t.model.operator,r=[t.model.app],i=this.$(".other_args").val();i&&r.push(i),r={args:r.join(",")},u.post(n,r,function(e){t.$(".results").append(e)})})},goback:function(){history.back()}});n.exports=a}),define("#luffy/1.0.0/luffy",["./router","./views/operators_view","./views/apps_view","./views/hosts_view","./views/tasks_view","backbone","mustache","underscore","jquery"],function(e,t,n){var r=e("backbone"),i=e("./router"),s=function(e){new i({container:e}),r.history.start()};Luffy={init:s},n.exports=Luffy});